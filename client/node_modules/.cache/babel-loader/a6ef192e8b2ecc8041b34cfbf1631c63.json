{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SAPTYADEEP\\\\OneDrive\\\\Desktop\\\\react-app\\\\AuthInMern-Email-Verify-In-MERN\\\\client\\\\src\\\\components\\\\ForgotPass\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport styles from \"./styles.css\";\nimport { Fragment } from \"react/cjs/react.production.min\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ForgotPass() {\n  _s();\n\n  const [validUrl, setValidUrl] = useState(true);\n  const param = useParams();\n  const [data, setData] = useState({\n    password: \"\",\n    rpassword: \"\",\n    user_id: \"\"\n  });\n  const [error, setError] = useState(\"\");\n\n  const handleChange = _ref => {\n    let {\n      currentTarget: input\n    } = _ref;\n    setData({ ...data,\n      [input.name]: input.value\n    });\n    console.log(data);\n  };\n\n  useEffect(() => {\n    const verifyEmailUrl = async () => {\n      try {\n        const url = `http://localhost:8080/api/rpvmail/${param.id}/resetpass/${param.token}`;\n        console.log(param.id);\n        const {\n          data\n        } = await axios.get(url);\n        console.log(data);\n        setValidUrl(true);\n        setData({ ...data,\n          user_id: param.id\n        });\n      } catch (error) {\n        console.log(\"error\", error);\n        setValidUrl(false);\n      }\n    };\n\n    verifyEmailUrl();\n  }, [param]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (data.password !== data.rpassword) {\n        setError(\"password donot match\");\n      } else {\n        try {\n          const url = \"http://localhost:8080/api/resetpass\";\n          const {\n            data: res\n          } = await axios.post(url, data);\n          localStorage.setItem(\"token\", res.data);\n          window.location = \"/\";\n        } catch (error) {\n          if (error.response && error.response.status >= 400 && error.response.status <= 500) {\n            setError(error.response.data.message);\n          }\n        }\n      }\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Fragment, {\n      children: validUrl ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Reset Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"password\",\n          name: \"password\",\n          onChange: handleChange,\n          value: data.password,\n          required: true // className={styles.input}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Re-Enter Password\",\n          name: \"rpassword\",\n          onChange: handleChange,\n          value: data.rpassword,\n          required: true // className={styles.input}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Confirm New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"404 Not Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 3\n  }, this);\n}\n\n_s(ForgotPass, \"zm9u5MqOxWFxX+hsr/DvamMSR/o=\", false, function () {\n  return [useParams];\n});\n\n_c = ForgotPass;\nexport default ForgotPass;\n\nvar _c;\n\n$RefreshReg$(_c, \"ForgotPass\");","map":{"version":3,"sources":["C:/Users/SAPTYADEEP/OneDrive/Desktop/react-app/AuthInMern-Email-Verify-In-MERN/client/src/components/ForgotPass/index.jsx"],"names":["useEffect","useState","useParams","Link","axios","styles","Fragment","ForgotPass","validUrl","setValidUrl","param","data","setData","password","rpassword","user_id","error","setError","handleChange","currentTarget","input","name","value","console","log","verifyEmailUrl","url","id","token","get","handleSubmit","e","preventDefault","res","post","localStorage","setItem","window","location","response","status","message","err"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport styles from \"./styles.css\";\r\nimport { Fragment } from \"react/cjs/react.production.min\";\r\n\r\n\r\nfunction ForgotPass() {\r\n\r\n\tconst [validUrl, setValidUrl] = useState(true);\r\n\tconst param = useParams();\r\n\r\n\tconst [data, setData] = useState({ password: \"\", rpassword: \"\", user_id: \"\" });\r\n\tconst [error, setError] = useState(\"\");\r\n\r\n\tconst handleChange = ({ currentTarget: input }) => {\r\n\t\tsetData({ ...data, [input.name]: input.value });\r\n\t\tconsole.log(data);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst verifyEmailUrl = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst url = `http://localhost:8080/api/rpvmail/${param.id}/resetpass/${param.token}`;\r\n\t\t\t\tconsole.log(param.id);\r\n\t\t\t\tconst { data } = await axios.get(url);\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tsetValidUrl(true);\r\n\t\t\t\tsetData({ ...data, user_id: param.id });\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(\"error\", error);\r\n\t\t\t\tsetValidUrl(false);\r\n\t\t\t}\r\n\t\t};\r\n\t\tverifyEmailUrl();\r\n\t}, [param]);\r\n\r\n\tconst handleSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tif (data.password !== data.rpassword) {\r\n\t\t\t\tsetError(\"password donot match\")\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst url = \"http://localhost:8080/api/resetpass\";\r\n\t\t\t\t\tconst { data: res } = await axios.post(url, data);\r\n\t\t\t\t\tlocalStorage.setItem(\"token\", res.data);\r\n\t\t\t\t\twindow.location = \"/\";\r\n\t\t\t\t}\r\n\t\t\t\tcatch (error) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\terror.response &&\r\n\t\t\t\t\t\terror.response.status >= 400 &&\r\n\t\t\t\t\t\terror.response.status <= 500\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tsetError(error.response.data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tcatch (err) {\r\n\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Fragment>\r\n\t\t\t\t{validUrl ? (\r\n\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t<h1>Reset Password</h1>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"password\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tvalue={data.password}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t// className={styles.input}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"Re-Enter Password\"\r\n\t\t\t\t\t\t\tname=\"rpassword\"\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tvalue={data.rpassword}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t// className={styles.input}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{error && <div>{error}</div>}\r\n\t\t\t\t\t\t<button type=\"submit\">\r\n\t\t\t\t\t\t\tConfirm New Password\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>) : (\r\n\t\t\t\t\t<h1>404 Not Found</h1>\r\n\t\t\t\t)}</Fragment>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ForgotPass;\r\n"]},"metadata":{},"sourceType":"module"}